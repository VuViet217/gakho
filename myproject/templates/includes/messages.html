{% if messages %}
<div id="message-container" style="position: fixed; top: 70px; right: 20px; z-index: 9999; max-width: 400px;">
    {% for message in messages %}
    <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert" style="margin-bottom: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.15);">
        <strong>
            {% if message.tags == 'success' %}
                <i class="fas fa-check-circle"></i>
            {% elif message.tags == 'error' or message.tags == 'danger' %}
                <i class="fas fa-exclamation-circle"></i>
            {% elif message.tags == 'warning' %}
                <i class="fas fa-exclamation-triangle"></i>
            {% else %}
                <i class="fas fa-info-circle"></i>
            {% endif %}
        </strong>
        {{ message }}
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    {% endfor %}
</div>

<script>
    // Auto-dismiss alerts after 3 seconds
    $(document).ready(function() {
        // Tự động ẩn sau 3 giây
        setTimeout(function() {
            $('#message-container .alert').each(function(index) {
                var $alert = $(this);
                setTimeout(function() {
                    $alert.fadeOut(400, function() {
                        $(this).remove();
                        // Xóa container nếu không còn alert nào
                        if ($('#message-container .alert').length === 0) {
                            $('#message-container').remove();
                        }
                    });
                }, index * 100); // Stagger animation
            });
        }, 3000); // 3 seconds
        
        // Cho phép đóng thủ công
        $('#message-container .alert .close').on('click', function(e) {
            e.preventDefault();
            $(this).closest('.alert').fadeOut(300, function() {
                $(this).remove();
                // Xóa container nếu không còn alert nào
                if ($('#message-container .alert').length === 0) {
                    $('#message-container').remove();
                }
            });
        });
    });
</script>
{% endif %}
